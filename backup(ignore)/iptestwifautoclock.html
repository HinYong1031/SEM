<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Link to tailwind -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.1/flowbite.min.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Link to FontAwesome -->
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- Link to Tailwind Elements -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tw-elements/dist/css/tw-elements.min.css" />

    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script src="headerFooter.js"></script>

    <title>FOCS</title>
</head>

<body>

    <header></header>

    <!--Your super duper perfect content here-->
    <h1>
        Automatically show and hide popup modal with time countdown in javascript
      </h1>
      
      
      
      <div id="my_modal">
        <span id="show_time">0.00</span>
        <h2>popup modal with time countdown</h2>
            <table border="1" cellpadding="5">
              <tr>
                <td>IP Address (IPv4)</td>
                <td id="ip"></td>
              </tr>
              <tr>
                <td>ISP</td>
                <td id="isp"></td>
              </tr>
              <tr>
                <td>Country</td>
                <td id="country"></td>
              </tr>
              <tr>
                <td>City</td>
                <td id="city"></td>
              </tr>
            </table>
      </div>
      
        <script type="text/javascript">
            $.getJSON('https://ipapi.co/json/', function(data) {
            $("#ip").text(data.ip); // Display the IPv4 address here
            $('#isp').text(data.org);
            $('#country').text(data.country_name);
            $('#city').text(data.region);
            $("#gmaps").attr("src", "https://www.google.com/maps?q=" + data.latitude + "," + data.longitude + "&output=embed");
            })

            var my_modal = document.getElementById('my_modal');
            var span_tag = document.getElementById('show_time');
            var countdown_call = '';
            var time_count = 0;

            function showModal(){
            my_modal.style.display = "block";
            // countdown after show
            countdown_call = setInterval(updateTime, 1000); // call for every 1s
            }
            // now show automatically after 1s
            // working
            setTimeout(showModal,1000) // 1000ms


            // now close 
            function closeModal(){
            my_modal.style.display = "none";
            }
            // setTimeout(closeModal,3000) // 1000ms
            // no need

            // now countdown time
            function updateTime(){
            time_count++;  
            span_tag.innerHTML = time_count;
            if(time_count == 5){
                clearInterval(countdown_call);
                closeModal();
            }

            }
        </script>

    <!--End of your super duper perfect content-->


    <footer class="text-center shadow-md bg-black lg:text-left font-mono"></footer>
    <!-- Link to tailwind -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.1/flowbite.min.js"></script>
    <!-- Link to Tailwind Elements -->
    <script src="https://cdn.jsdelivr.net/npm/tw-elements/dist/js/tw-elements.umd.min.js"></script>

</body>

</html>